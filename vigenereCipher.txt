#include <stdio.h>
#include <string.h>
#include <math.h>

int main()
{
    char msg[] = "Hello World", key[30], ch;
    int m, n, i = 0;
    printf("\n--------------------Vigenere Cipher---------------------\n");
    n = strlen(msg);
    printf("String to be Encrypted: 'Hello World'\n");
    printf("Enter any string as a key:- ");
    gets(key);
    m = strlen(key);

    while (i < n)
    {
        if (n != i)
            key[i] = key[i % m];
        i++;
    }
    key[i] = '\0';
    printf("\nKey for Encryption:- %s", key);
    strupr(msg);
    strupr(key);
    for (i = 0; i < n; i++)
    {
        msg[i] = msg[i] - 65;
        key[i] = key[i] - 65;
    }
    for (i = 0; i < n; i++)
    {
        ch = (msg[i] + key[i]) % 26;
        msg[i] = ch + 65;
    }
    msg[i] = '\0';
    printf("\nEncrypted Text:- %s\n", msg);

    for (i = 0; i < n; i++)
    {
        msg[i] = msg[i] - 65;
        ch = (msg[i] - key[i]) % 26;
        if (ch < 0)
            ch = ch + 26;
        msg[i] = ch + 65;
    }
    msg[i] = '\0';
    printf("\nDecrypted Text:- %s\n", strlwr(msg));

    return 0;
}
